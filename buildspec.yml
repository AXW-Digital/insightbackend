---
phases: 
  build: 
    commands: 
      - "echo Build started on `date`"
      - "echo Building the Docker image..."
      - "docker build -t axw-digital/insightbackend ."
      - "docker tag axw-digital/insightbackend 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_backend_node"
  post_build: 
    commands: 
      - "echo Build completed on `date`"
      - "echo Pushing the Docker image..."
      - "docker push 740126133497.dkr.ecr.eu-north-1.amazonaws.com/insight_backend_node"
  pre_build: 
    commands: 
      - "echo Logging in to AWS..."
      - "docker login -u AWS -p eyJwYXlsb2FkIjoiUXQydFJKblAvVVhVbmp3d3BjN1dNeXBLOVRhcW9wSmp4V05POExjTURLU1NYOFZQZVZDWk5QWC9nMEtmbkp2M0EzNHZPUmMxOWM1WGJlTDhpTVZITXI0d0t6bENZMlhZL2piUk5VMFFxcWwvN0VvaklyWDdySDhITjh5amJUNWphTmRQU2lBOFRhL2t0SEh1bUxTWlkvNE5LMGRUVXhPZG1HcDBydTVlMkF6eEZVSG9kS1orejJyVW9LVWN0SjBIaUJHNldMN1d4OHJNSjMvRHgvdTdVWWNFSjZvN3ljZlAzejFhRFBOWkxMeEQvL0h5VnVWWnBZK24vd3REL2VPdjIyOExLZ1NJUU02QTFzL2lGeUJCZTl2MC8zUzhoTTBFUzRrRU5Na21XbFg0akRDL2RLc0NxZDdNRGZna0Y5S1lPc2k5Q2Jpdk1YK3R6M3pkd3dJU251QTBWWmFHQS9LNU9iUEhvTlpkZzBKUUpmU1l5Wk4xaWZwVWt6a0NMU05xNkF0Y3FmSEtmSnhoMFhhdk5BeFdJdURnRU5Bc0tlVi9SV0lNblRwRHRpK0NPeEp1T0xpVWdsTVMvY0N5TmJsdWhiaWlYYVlXZU4ybnY0SUFjcENBcDR6YzlxY0V0UTBGT083SGEzVzU3NXdieUNzckVRdXdUSXhRVXlVelhnVjBrRmV4Zzh0SXN3MlFSSWVOLzNDYjg0M2RzSml1RVd4TDJpWHpna0xhN3hLaUNRVzN3RlhBQVpMQk5xaEcyQ3JHbTkza2Jja2poUTF4QW1CK3dxd3JoOElTalBoUFNJQUQvM1pva1NLT2Jjb3JFUkJUNHJGcjNMRjNaSFZYUzNHUnRtQlpYTWVhTnBod0pLVDJGYVhGSDBDbjZaSFdidjFOS3BRTzBsRGlSS0lydTNnaktYdXVqT0xQaWRZN3M0dFdqOU93Umw1VVEvR1I2cEJWS282WU9IV0xmVytPaXc0QVVvdVR0OXJvWmVKdHV0eFcwSGpBNTFWYXRPWDJ3dnpFeG9INXQrTmttOEN4cUxrTzRhSE9MS0tIdkcyWkFBUkhHdW1EUXIreFRHSXAreEsySTNlOUE1c3BpRzNXQ0lNMnpMQW1udWNXOTcrVmgvaUUrdTdrVjRnNzc1aThQektVUjFyekFDTEN3c1hGV2NGeHVuRTlTVkN5VUpBY2RCT3kwL2FkRUhiN1c5dTc4NlFXT0YzbEVxL0VtcFdiZEJ4MU5CeWFKejBob1hnLzFTdDFEbFVtOTBkOGZCQVg0WUthWFl5OVZWeDhWNHFpclh4UmE4UlV6REJ2YStsRHIzQm94d0dxaENBalhNb3BWbkZiQTBjRlBhWE5KdXFHVG9VYjlvRGFVTEtneEhhVGtVakhQMFhqMHBRWjQvL3hXNTNSNUxpKzE0dWdJRjlqTHNTVDhGYlBQeGZGbDVkRUtXR1VPUzhmYnU0aVF4dE1BUXpzcHc9PSIsImRhdGFrZXkiOiJBUUlCQUhoZnJGUTJhSUl3RjVWYzc5UkhFUEduY1VXdXIyL0p6TTh0L1p6b0V0UnJBZ0grSGIrZVlOMGZIMy9nZE5UbkVwUVRBQUFBZmpCOEJna3Foa2lHOXcwQkJ3YWdiekJ0QWdFQU1HZ0dDU3FHU0liM0RRRUhBVEFlQmdsZ2hrZ0JaUU1FQVM0d0VRUU14cDR3YWxMaVI0TjZxdUl5QWdFUWdEdUltUytpT3FwNnNxY2JJTkhxeFpkdjgvR2YwcjREcmpmRTd0aER5RE1PRmtQQkE5T3Y1SVV0WkFxVlZobmRRSTFDZWd5dmxxWGFIWVhPaFE9PSIsInZlcnNpb24iOiIyIiwidHlwZSI6IkRBVEFfS0VZIiwiZXhwaXJhdGlvbiI6MTYxNzEzNzg0MX0= 740126133497.dkr.ecr.eu-north-1.amazonaws.com"
artifacts:
  files: 
    - "**/*"
  name: "s3-to-s3-latest-build.zip" 
version: 0.1